{% extends "admin/base.html" %} {% block content %}
<div class="mb-8">
    <h2 class="text-3xl font-extrabold text-zinc-900 tracking-tight">
        Feedback Details
    </h2>
    <p class="text-zinc-500 mt-1">
        Detailed view of user feedback and sentiment analysis.
    </p>
</div>

<!-- Detailed Feedback List -->
<div class="bg-white rounded-xl border border-zinc-200 shadow-sm overflow-hidden mb-10">
    <div class="px-6 py-4 border-b border-zinc-100 flex justify-between items-center bg-zinc-50/50">
        <h3 class="font-bold text-zinc-900">User Feedback Log</h3>
    </div>
    <div class="overflow-x-auto">
        <table class="w-full text-left">
            <thead>
                <tr class="text-zinc-400 text-xs uppercase tracking-wider border-b border-zinc-50">
                    <th class="px-6 py-3 font-semibold">User</th>
                    <th class="px-6 py-3 font-semibold">Feedback</th>
                    <th class="px-6 py-3 font-semibold">Sentiment</th>
                    <th class="px-6 py-3 font-semibold text-right">Date</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-zinc-50">
                {% for feedback in pagination.items %}
                <tr class="hover:bg-zinc-50/50 transition">
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-zinc-900">{{ feedback.user.username }}</div>
                        <div class="text-xs text-zinc-500">{{ feedback.user.email }}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-zinc-600 max-w-lg lg:max-w-2xl whitespace-pre-wrap">
                            {{ feedback.feedback_text }}
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 rounded-md text-xs font-bold 
            {% if feedback.sentiment == 'Positive' %}bg-green-100 text-green-700
            {% elif feedback.sentiment == 'Negative' %}bg-red-100 text-red-700
            {% else %}bg-blue-100 text-blue-700{% endif %}">
                            {{ feedback.sentiment }}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-xs text-zinc-500 text-right">
                        {{ feedback.created_at.strftime('%Y-%m-%d %H:%M') }}
                    </td>
                </tr>
                {% endfor %}
                {% if not pagination.items %}
                <tr>
                    <td colspan="4" class="px-6 py-20 text-center text-zinc-400">
                        <div class="text-4xl mb-4">ðŸ’¬</div>
                        <p class="text-lg">No feedback available yet.</p>
                    </td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    {% if pagination.pages > 1 %}
    <div
        class="px-6 py-4 bg-zinc-50 border-t border-zinc-200 flex flex-col sm:flex-row items-center justify-between gap-4">
        <div class="text-sm text-zinc-500">
            Showing
            <span class="font-medium">{{ (pagination.page - 1) * pagination.per_page + 1 }}</span>
            to
            <span class="font-medium">{{ [pagination.page * pagination.per_page, pagination.total]|min }}</span>
            of <span class="font-medium">{{ pagination.total }}</span> entries
        </div>
        <div class="flex gap-1">
            {% if pagination.has_prev %}
            <a href="{{ url_for('admin.sentiment', page=pagination.prev_num) }}"
                class="px-3 py-1.5 bg-white border border-zinc-200 rounded-lg text-sm hover:bg-zinc-100 transition">Previous</a>
            {% endif %}

            {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if page_num %}
            <a href="{{ url_for('admin.sentiment', page=page_num) }}"
                class="px-3 py-1.5 rounded-lg text-sm transition {% if page_num == pagination.page %}bg-zinc-900 text-white{% else %}bg-white border border-zinc-200 text-zinc-600 hover:bg-zinc-100{% endif %}">
                {{ page_num }}
            </a>
            {% else %}
            <span class="px-2 py-1.5 text-zinc-400">...</span>
            {% endif %}
            {% endfor %}

            {% if pagination.has_next %}
            <a href="{{ url_for('admin.sentiment', page=pagination.next_num) }}"
                class="px-3 py-1.5 bg-white border border-zinc-200 rounded-lg text-sm hover:bg-zinc-100 transition">Next</a>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}